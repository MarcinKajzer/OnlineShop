@model Shop.ViewModels.AddProductToCartViewModel

    <form asp-action="AddProduct" asp-controller="Cart" method="post">

        <input type="hidden" asp-for="@Model.Id" />
        <input type="hidden" asp-for="@Model.Image" />
        <input type="hidden" asp-for="@Model.Price" />
        <input type="hidden" asp-for="@Model.Name" />

        <div class="size-and-quantity">

            @if (Model.Quantity > 1)
            {
                Guid id = Guid.NewGuid();

                <div>
                    @{ int numberOfSizes = Model.Sizes.Count();
                       bool isChecked = true;
                    }
                    @for (int i = 0; i < numberOfSizes; i++)
                    {
                        if (Model.Sizes[i].Quantity >= 1)
                        {
                            int sizeValue = (int)Model.Sizes[i].Size;

                            if (isChecked)
                            {
                                <input type="radio" asp-for="SelectedSize" value="@sizeValue" id="@id@i" checked />
                                isChecked = false;
                            }
                            else
                            {
                                <input type="radio" asp-for="SelectedSize" value="@sizeValue" id="@id@i" />
                            }
                            <label for="@id@i">@Model.Sizes[i].Size</label>
                        }
                    }
                </div>
                <input name="quantity" type="number" value="1" />
            }
            else
            {
                <span class="product-not-available">Brak w magazynie</span>
            }

        </div>

        @if (User.IsInRole("Administrator") || Model.Quantity == 0)
        {
            <button type="submit" disabled class="disabled-button">Produkt</button>
        }
        else
        {
            <button type="submit">Do koszyka</button>
        }


    </form>

