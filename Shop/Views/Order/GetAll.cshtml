@model List<Shop.ViewModels.OrderDetailsViewModel>
@{
    ViewData["Title"] = "GetAllNotSent";
    int listLength = Model.Count();
}

    <main>

        <a asp-action="GetAll" asp-controller="Order" asp-route-isSent="true">Wysłane</a>
        <span>|</span>
        <a asp-action="GetAll" asp-controller="Order" asp-route-isSent="false">Niewysłane</a>

        <table cellspacing="0" class="order-table">
            <thead>
                <tr>
                    <th>Data</th>
                    <th>Uzytkownik</th>
                    <th>Adres</th>
                    <th>Szczegóły zamówienia</th>
                    <th>Status</th>
                    @if (listLength > 0 && !Model[0].IsSent)
                    {
                        <th>Opcje</th>
                    }
                </tr>
            </thead>
            <tbody>
                @for (int i = 0; i < listLength; i++)
                {
                    <tr>
                        <td>@Model[i].CreationDate.ToShortDateString() <br /> @Model[i].CreationDate.ToShortTimeString()</td>
                        <td>
                            @Model[i].UserEmail
                        </td>
                        <td>
                            @Model[i].UserName <br />
                            @Model[i].Adress.Street @Model[i].Adress.BuildingNumber / @Model[i].Adress.FlatNumber <br>
                            @Model[i].Adress.PostCode @Model[i].Adress.City
                        </td>
                        <td>
                            @{ int productListLength = Model[i].Products.Count();}
                            @for (int j = 0; j < productListLength; j++)
                            {
                                <div>@Model[i].Products[j].Name x @Model[i].Products[j].Quantity<br><span>Rozmiar: @Model[i].Products[j].Size</span> </div>
                            }
                        </td>
                        @if (!Model[i].IsSent)
                        {
                             <td>Opłacono</td>
                        }
                        else
                        {
                            <td>Wysłano</td>
                        }

                        @if (!Model[i].IsSent)
                        {
                            <td>
                                <a asp-action="SendShipping" asp-controller="Order" asp-route-orderId="@Model[i].Id" class="link-button">Wysłano</a>
                            </td>
                        }

                    </tr>

                }

            </tbody>
        </table>
    </main>

